<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Projectile Motion Simulator</title>
    <link rel="stylesheet" href="src/css/app.css">
</head>
<body>
    <!-- Top Header with attribution and help -->
    <header class="app-header">
        <div class="header-left">
            <h1>üöÄ Projectile Motion Simulator</h1>
            <p class="author">By Vladimir Lopez | <a href="https://vladimirlopez.org" target="_blank" rel="noopener">vladimirlopez.org</a></p>
        </div>
        <div class="header-right">
            <button id="gameRulesBtn" class="header-btn">üìú Game Rules</button>
            <button id="helpBtn" class="header-btn">‚ùì Help & Examples</button>
            <div class="score-badge">Score: <span id="headerScore">0</span></div>
        </div>
    </header>

    <div class="container">

        <main>
            <!-- LEFT PANEL: Controls -->
            <aside class="controls-section">
                <h2>‚öôÔ∏è Controls</h2>
                
                <!-- Step-by-Step Instructions -->
                <div class="instructions">
                    <h3>üìñ How to Use:</h3>
                    <ol>
                        <li>Choose a <strong>projectile type</strong> below</li>
                        <li>Adjust <strong>parameters</strong> with sliders</li>
                        <li>Click <strong>Launch</strong> to see the motion</li>
                        <li>Observe the <strong>two-column analysis</strong> on the right</li>
                    </ol>
                </div>

                <!-- Mode Selection -->
                <div class="mode-selection">
                    <h3>Step 1: Choose Projectile Type</h3>
                    <div class="type-buttons">
                        <button class="type-btn active" data-type="vertical">
                            <span class="icon">‚¨ÜÔ∏è</span>
                            <div class="text">
                                <div>Vertical</div>
                                <small style="opacity: 0.7;">Throw up or down</small>
                            </div>
                        </button>
                        <button class="type-btn" data-type="horizontal">
                            <span class="icon">‚û°Ô∏è</span>
                            <div class="text">
                                <div>Horizontal</div>
                                <small style="opacity: 0.7;">Launch from height</small>
                            </div>
                        </button>
                        <button class="type-btn" data-type="angled">
                            <span class="icon">‚ÜóÔ∏è</span>
                            <div class="text">
                                <div>Angled</div>
                                <small style="opacity: 0.7;">Launch at angle</small>
                            </div>
                        </button>
                    </div>
                </div>

                <!-- Parameters -->
                <div class="parameters">
                    <h3>Step 2: Set Parameters</h3>
                    <div class="param-group">
                        <label>
                            <span>‚ö° Initial Velocity</span>
                            <span class="value-display" id="v0Display">20 m/s</span>
                        </label>
                        <input type="range" id="initialVelocity" min="-50" max="50" value="20" step="0.5" title="Initial velocity (can be negative)">
                    </div>
                    <div class="param-group" id="angleGroup" style="display: none;">
                        <label>
                            <span>üìê Launch Angle</span>
                            <span class="value-display" id="angleDisplay">45¬∞</span>
                        </label>
                        <input type="range" id="angle" min="0" max="90" value="45" step="1" title="Launch angle">
                    </div>
                    <div class="param-group" id="heightGroup">
                        <label>
                            <span>üèîÔ∏è Launch Height</span>
                            <span class="value-display" id="h0Display">0 m</span>
                        </label>
                        <input type="range" id="initialHeight" min="0" max="50" value="0" step="0.5" title="Initial height">
                    </div>
                    <div class="param-group">
                        <label>
                            <span>üåç Gravity</span>
                            <span class="value-display" id="gDisplay">9.8 m/s¬≤</span>
                        </label>
                        <input type="range" id="gravity" min="1" max="20" value="9.8" step="0.1" title="Gravity">
                    </div>
                </div>

                <!-- Control Buttons -->
                <!-- Prediction Section -->
                <div class="param-group" id="predictGroup">
                    <label><span>üìù Predict:</span></label>
                    <div class="predict-flex">
                        <input type="number" id="predictTime" placeholder="Time (s)" class="predict-input" title="Predict time of flight">
                        <input type="number" id="predictHeight" placeholder="Max Height (m)" class="predict-input height" title="Predict max height">
                        <input type="number" id="predictRange" placeholder="Range (m)" class="predict-input range" title="Predict range">
                    </div>
                    <small>Enter your prediction(s) before launching!</small>
                </div>
                <div class="control-buttons">
                    <button id="launchBtn" class="btn-primary">
                        <span>üöÄ</span> Launch
                    </button>
                    <button id="pauseBtn" class="btn-secondary" disabled>
                        <span>‚è∏Ô∏è</span> Pause
                    </button>
                    <button id="resetBtn" class="btn-secondary">
                        <span>üîÑ</span> Reset
                    </button>
                </div>
                <div id="resultPanel"></div>
                    <div id="modalOverlay" class="modal-overlay hidden">
                        <div id="modalContent" class="modal-content">
                            <div class="modal-header">
                                <div id="modalTabs" class="modal-tabs"></div>
                                <button id="closeModalBtn" class="close-modal-btn">‚úñÔ∏è</button>
                            </div>
                            <div id="modalBody"></div>
                        </div>
                    </div>
            </aside>

            <!-- CENTER PANEL: Visualization -->
            <section class="visualization-section">
                <h2>üìä Visualization</h2>
                
                <div class="viz-controls">
                    <button class="viz-btn" id="slowMotion">üêå Slow Motion</button>
                    <button class="viz-btn active" id="showVectors">üìä Vectors</button>
                    <button class="viz-btn active" id="showGrid">üìê Grid</button>
                    <button class="viz-btn active" id="showTrail">üé® Trail</button>
                </div>

                <div id="canvasContainer"></div>
            </section>

            <!-- RIGHT PANEL: Tips (Analysis now in canvas) -->
            <aside class="analysis-section">
                <h2>üí° Tips</h2>
                
                <!-- Help Section -->
                <div class="help-section">
                    <h3>Current Mode Tips</h3>
                    <div class="help-content">
                        <ul id="tipsList">
                            <li>Vertical projectiles have no horizontal motion (v‚Çì = 0)</li>
                            <li>Time to go up equals time to come down</li>
                            <li>Maximum height occurs when v·µß = 0</li>
                            <li>Try different velocities to see how height changes</li>
                        </ul>
                    </div>
                </div>
                
                <p style="margin-top: 16px; font-size: 0.85rem; color: var(--text-secondary); line-height: 1.5;">
                    üìä <strong>Two-Column Analysis</strong> and <strong>Results</strong> are displayed in the simulation canvas (top-right panel).
                </p>
            </aside>
        </main>

        <footer>
            <div class="stats-section">
                <div class="stat-item">
                    <span class="stat-label">üöÄ Launches:</span>
                    <span class="stat-value" id="launchCount">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">‚ú® Modes Completed:</span>
                    <span class="stat-value" id="modesCompleted">0/3</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">üéØ Learning Progress:</span>
                    <span class="stat-value" id="bestAccuracy">Getting Started</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- App Footer with copyright -->
    <footer class="app-footer">
        <p>&copy; 2025 Vladimir Lopez. Licensed under the MIT License. 
        <a href="https://github.com/vladimirlopez/Projectiles-Simulation-Copilot-version" target="_blank" rel="noopener">View on GitHub</a></p>
    </footer>

    <!-- Modal for Help/Game Rules -->
    <div id="modalOverlay" class="modal-overlay hidden">
        <div id="modalContent" class="modal-content">
            <div class="modal-header">
                <div id="modalTabs" class="modal-tabs"></div>
                <button id="closeModalBtn" class="close-modal-btn">‚úñÔ∏è</button>
            </div>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- p5.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>

    <!-- Visualization (p5.js sketch, must load after p5.js) -->
    <script src="src/js/visualization.js"></script>

    <!-- Main Application (must be a module, loads last) -->
    <script type="module" src="src/js/main.js"></script>

    <!-- DEBUG TEST: Remove after debugging -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        console.log('DOM loaded');
        console.log('Type buttons:', document.querySelectorAll('.type-btn'));
        console.log('Launch button:', document.getElementById('launchBtn'));
      });
    </script>
</body>
</html>
